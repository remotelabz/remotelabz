{% extends 'dashboard.base.html.twig' %}

{% block breadcrumbs %}
    {%- set breadcrumbs = breadcrumbs|merge({ 'Resources': path('resources') }) -%}
    {{ parent() }}
{% endblock %}

{% block sidebar %}
    {% set category = 'resources' %}
    {{ parent() }}
{% endblock %}

{% block wrapper %}
<div class="content-title">
    <div class="content-title-infos">
        <h1>Resources usages</h1>
    </div>
</div>
<div class="content-body" data-page="resources">
    {% for worker in value %}
    <div class="row worker-gauges">
        <div class="col-12">
            <h2 class="worker-title">{{ worker['worker'] }}</h2>
        </div>
    </div>
    <div class="row">
        <div class="col-xl-8 col-lg-12">
            <ul>
                <li>Number of opened files : {{ worker['openedfiles'] }}</li>
                <li>Number of LXC containers : {{ worker['lxclsrun'] }}</li>
                <li>Number of VM QEMU : {{ worker['qemurun'] }}</li>
            </ul>
            <div class="grid-xs-1 grid-sm-2 grid-md-3 grid-lg-3 grid-xl-3 grid-xxl-4">
                
                    <div class="card-body d-flex flex-column">
                        <div class="stats-circle cpu-circle"></div>
                        <p class="card-text flex-grow-1 text-center" id="cpu" name="cpu" style="display: none;">
                            {% if worker['cpu'] is null %} NA {% else %} {{ worker['cpu'] }}% {% endif %}
                        </p>
                    </div>
                
                
                    <div class="card-body d-flex flex-column">
                        <div class="stats-circle memory-circle"></div>
                        <p class="card-text flex-grow-1 text-center" id="memory" name="memory" style="display: none;">
                            {% if worker['memory'] is null %} NA {% else %} {{ worker['memory'] }}% {% endif %}
                        </p>
                    </div>
                
                
                    <div class="card-body d-flex flex-column">
                        <div class="stats-circle disk-circle"></div>
                        <p class="card-text flex-grow-1 text-center" id="disk" name="disk" style="display: none;">
                            {% if worker['disk'] is null %} NA {% else %} {{ worker['disk'] }}% {% endif %}
                        </p>
                    </div>
                
                
                    <div class="card-body d-flex flex-column">
                        <div class="stats-circle lxcfs-circle"></div>
                        <p class="card-text flex-grow-1 text-center" id="lxcfs" name="lxcfs" style="display: none;">
                            {% if worker['lxcfs'] is null %} NA {% else %} {{ worker['lxcfs'] }}% {% endif %}
                        </p>
                    </div>
                
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}

{% block javascripts %}
{{ parent() }}
{# Les anciennes dépendances jQuery circle-progress ne sont plus nécessaires #}
{# <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script> #}
{# <script src="{{asset('build/js/jquery.circle-progress.min.js')}}"></script> #}
{# <script src="{{asset('build/editor/bootstrap/js/jquery-cookie-1.4.1.js')}}"></script> #}
{% endblock %}